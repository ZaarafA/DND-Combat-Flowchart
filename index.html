<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Combat Flowchart</title>
    <script type="module" src="class_data.js"></script>
    <script type="module" src="main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.7.570/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js"></script>
    <script>mermaid.initialize({ startOnLoad: true });</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <p id="credit"><a target="_blank" href="https://x.com/IlaZaaraF">Azaaraf</a></p>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <input type="file" id="input-button" accept="application/pdf"/>
                <button id="save-png">SAVE</button>
                <button id="help-button">?</button>
            </div>
            <h2 class="title">D&D Combat Flowchart Builder</h2>
            <button id="toggle-header"> << </button>
        </div>
        <svg class="arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 2L5 9h5v13h4V9h5z" fill="rgb(77, 32, 107)"/>
        </svg>
        <div class="popup" id="popup">
            <div class="popup-content">
                <span class="close" id="popup-close">&times;</span>
                <h2>Under Construction!</h2>
                <p>This page is still a work in progress.</p> <hr>
                <h4>To Use:</h4>
                <ul>
                    <li>Upload a Character Sheet PDF from D&D Beyond</li>
                    <li>Left-click to add a child node. Right-click to delete</li>
                    <li>Refresh the page before selecting a new sheet. (I'll fix that soon. Hopefully.)</li>
                </ul>
            </div>
        </div>        

        <div id="flowchart">
        </div>
        <div id="test-flowchart" class="mermaid">
            %%{init: {'theme': 'dark'}}%%
            flowchart TD;
            A{{Get Started!}} --> B[Load a Character Sheet PDF]
            B ---> |"Fillable Field PDF <br> ex. from D&DBeyond"|C[Click on a Node to <br>Edit the Flowchart]
            C --> E([Add: creates a child Node])
            C --> F([Delete: deletes node and all descendents])
            C --> G([Edit: Edit Node description])

        </div>

        <div class="context-menu">
            <div class="menu-item">Add</div>
            <div class="menu-item">Delete</div>
            <div class="menu-item">Edit</div>
        </div>
        <div class="node-menu">
            <label for="menu-input">Description:</label><br>
            <textarea name="menu-input" id="menu-input" placeholder="Type here..." rows="2" cols="30"></textarea>
            <br><button type="button" id="menu-submit">Enter</button>
        </div>
    </div>
</body>
</html>